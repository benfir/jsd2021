
=== Krew - What is it?

[%step]
* a **package manager for kubectl plugins**
[%step]
** like "brew" or "chocolatey" but for kubectl :-)
** developed 2018 by Google intern Luk Burchard
* Open Source (ASL2.0)
* https://krew.sigs.k8s.io/
* https://github.com/kubernetes-sigs/krew

=== Krew - Useful For Users

* easy way to
[%step]
** discover
** install
** update and
** remove kubectl plugins

=== Krew - Useful For Developers

[%step]
* make their plugins discoverable
[%step]
** globally
** locally
* easy and uniform way to package their plugins for multiple platforms
[%step]
** Win, Linux, MacOS, ...

=== Krew - Important Commands

[source,shell,highlight=2|8|9|11|12|13]
----
Usage:
  kubectl krew [command]

Available Commands:
  help        Help about any command
  index       Manage custom plugin indexes
  info        Show information about an available plugin
  install     Install kubectl plugins
  list        List installed kubectl plugins
  search      Discover kubectl plugins
  uninstall   Uninstall plugins
  update      Update the local copy of the plugin index
  upgrade     Upgrade installed plugins to newer versions
  version     Show krew version and diagnostics
----

=== Krew - Global Index

* https://krew.sigs.k8s.io/plugins/
* https://github.com/kubernetes-sigs/krew-index

[source,shell]
----
$ kubectl krew search
NAME             DESCRIPTION                        INSTALLED
access-matrix    Show an RBAC access matrix ...     yes
advise-psp       Suggests PodSecurityPolicies ...   no
allctx           Run commands on contexts in ...    no
apparmor-manager Manage AppArmor profiles ...       no
assert           Assert Kubernetes resources ...    no
auth-proxy       Authentication proxy to ...        no
<...>
----

=== Krew - Private Index

[source,shell]
----
$ k krew index
Manage which repositories are used to discover and install plugins from.

Usage:
  kubectl krew index [command]

Available Commands:
  add         Add a new index
  list        List configured indexes
  remove      Remove a configured index
----

=== Krew - Install Not Published Plugins

* intended for development purposes only

[source,shell,highlight=1|5|6|7]
----
$ k krew install
Usage:
  kubectl krew install [flags]
Flags:
  --archive string      force all downloads to use the specified file
  --manifest string     specify local plugin manifest file
  --manifest-url string specify plugin manifest file from url
----

=== Krew - Local Index

[source,shell,highlight=1|3|4|5|6|7|8|9]
----
$ k krew list
PLUGIN         VERSION
access-matrix  v0.5.0
ctx            v0.9.4
get-all        v1.3.8
krew           v0.4.1
ns             v0.9.4
oidc-login     v1.25.0
view-secret    v0.8.1
<...>
----

=== Krew - Local Index

[source,shell]
----
/home/bf/.krew/
├── bin
│   └── <symbolic links>
├── index
│   └── default
|       └── <git-repo>
├── receipts
│   ├── <manifests>
└── store
    ├── ctx
    ├── krew
    ├── ns
    ├── view-secret
    ├── whoami
    └── who-can
----
